Intenté ordenar un poco el código, en un comienzo pensé en realizar un foreach pero por temas de rendimiento con node.js funciona mejor utilizar "for" con "if", otra opción que había pensado era organizar los productos con un switch y generar los cases necesarios, otra opción que pensé factible es utilizar strem con java 8 y utilizar un mapa para los productos y así hacer las modificaciones correspondientes.
